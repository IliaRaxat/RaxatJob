# Исправление прав доступа по ролям

## Проблема
- HR мог создавать резюме (доступ к `/resume`)
- Кандидаты могли создавать вакансии (доступ к `/jobs/create`)
- Отсутствовала проверка ролей на критичных страницах

## Исправления

### 1. Страница резюме (`Frontend/src/app/resume/page.tsx`)
**Изменения:**
- Заменен `AuthGuard` на `RoleGuard` с ролью `CANDIDATE`
- Теперь только кандидаты могут создавать и управлять резюме

**Код:**
```tsx
<RoleGuard allowedRoles={['CANDIDATE']}>
  {/* Контент страницы резюме */}
</RoleGuard>
```

### 2. Страница создания вакансий (`Frontend/src/app/jobs/create/page.tsx`)
**Изменения:**
- Добавлен `RoleGuard` с ролями `HR` и `ADMIN`
- Удалена старая проверка через `useEffect` и `getUserRole`
- Удален импорт `getUserRole`

**Код:**
```tsx
<RoleGuard allowedRoles={['HR', 'ADMIN']}>
  {/* Контент страницы создания вакансии */}
</RoleGuard>
```

### 3. Страница "Мои вакансии" (`Frontend/src/app/jobs/my/page.tsx`)
**Изменения:**
- Добавлен `RoleGuard` с ролями `HR` и `ADMIN`
- Удалена старая проверка через `useEffect` и `getUserRole`
- Удален импорт `getUserRole`

**Код:**
```tsx
<RoleGuard allowedRoles={['HR', 'ADMIN']}>
  {/* Контент страницы моих вакансий */}
</RoleGuard>
```

## Результат

### Доступ для CANDIDATE (Кандидат):
✅ Может просматривать вакансии (`/jobs`)
✅ Может просматривать стажировки (`/companies`)
✅ Может создавать и управлять резюме (`/resume`)
❌ НЕ может создавать вакансии (`/jobs/create`)
❌ НЕ может просматривать "Мои вакансии" (`/jobs/my`)

### Доступ для HR (Работодатель):
✅ Может просматривать вакансии (`/jobs`)
✅ Может просматривать стажировки (`/companies`)
✅ Может создавать вакансии (`/jobs/create`)
✅ Может управлять своими вакансиями (`/jobs/my`)
✅ Имеет доступ к HR панели (`/hr`)
❌ НЕ может создавать резюме (`/resume`)

### Доступ для ADMIN (Администратор):
✅ Полный доступ ко всем страницам
✅ Может создавать вакансии
✅ Может управлять вакансиями
✅ Имеет доступ к админ-панели (`/admin`)

## Технические детали

### RoleGuard компонент
Компонент `RoleGuard` автоматически:
1. Проверяет аутентификацию пользователя
2. Проверяет роль пользователя
3. Перенаправляет на главную страницу, если роль не подходит
4. Показывает сообщение об ошибке доступа

### Преимущества использования RoleGuard:
- Централизованная логика проверки ролей
- Автоматическое перенаправление
- Консистентное поведение на всех страницах
- Легко добавлять новые защищенные страницы

## Проверка
Для проверки исправлений:
1. Войдите как кандидат - попробуйте открыть `/jobs/create` (должен перенаправить)
2. Войдите как HR - попробуйте открыть `/resume` (должен перенаправить)
3. Проверьте навигацию в хедере - ссылки должны отображаться только для соответствующих ролей
