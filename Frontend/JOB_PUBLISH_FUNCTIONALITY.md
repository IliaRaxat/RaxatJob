# Функциональность публикации вакансий из черновиков

## Описание изменений

Добавлена возможность для HR публиковать вакансии из состояния DRAFT в активное состояние ACTIVE с помощью кнопки "Опубликовать" в разделе "Мои вакансии".

## Изменения в файлах

### 1. `src/lib/api/jobsApi.ts`
- **Добавлен endpoint**: `publishJob` для публикации вакансий
- **Метод**: `POST /jobs/{jobId}/publish`
- **Функциональность**: изменение статуса с DRAFT на ACTIVE
- **Инвалидация кэша**: обновление списков вакансий после публикации

### 2. `src/app/jobs/my/page.tsx`
- **Добавлены функции**: `getJobStatusLabel`, `getJobStatusColor` для отображения статусов
- **Новый хук**: `usePublishJobMutation` для публикации вакансий
- **Обработчик**: `handlePublishJob` для обработки публикации
- **Условное отображение**: кнопка "Опубликовать" только для статуса DRAFT
- **Обновленный UI**: отображение статуса вакансии и модерации

### 3. `src/app/jobs/my/my-jobs.module.css`
- **Стили статусов**: `.statusBadges`, `.jobStatus` для отображения статусов
- **Кнопка публикации**: `.publishButton` с hover-эффектами
- **Анимация загрузки**: `.spinner` для индикации процесса
- **Адаптивный дизайн**: корректное отображение на мобильных устройствах

## Функциональность

### Отображение статусов:
- ✅ **Статус вакансии**: DRAFT, ACTIVE, PAUSED, CLOSED
- ✅ **Статус модерации**: PENDING, APPROVED, REJECTED
- ✅ **Цветовая индикация**: разные цвета для каждого статуса
- ✅ **Вертикальное расположение**: статусы в колонке справа

### Кнопка публикации:
- ✅ **Условное отображение**: только для статуса DRAFT
- ✅ **Иконка публикации**: стрелка вверх с линией
- ✅ **Состояние загрузки**: спиннер и текст "Публикация..."
- ✅ **Hover-эффекты**: подъем кнопки и тень
- ✅ **Автообновление**: список обновляется после публикации

## Цветовая схема статусов

### Статус вакансии:
- **DRAFT** (Черновик): `#6b7280` (серый)
- **ACTIVE** (Активна): `#10b981` (зеленый)
- **PAUSED** (Приостановлена): `#f59e0b` (желтый)
- **CLOSED** (Закрыта): `#ef4444` (красный)

### Статус модерации:
- **PENDING** (На модерации): `#f59e0b` (желтый)
- **APPROVED** (Одобрена): `#10b981` (зеленый)
- **REJECTED** (Отклонена): `#ef4444` (красный)

## Пользовательский опыт

### До изменений:
- ❌ Нет отображения статуса вакансии
- ❌ Нет возможности публиковать черновики
- ❌ Только статус модерации виден

### После изменений:
- ✅ **Двойной статус**: вакансии и модерации
- ✅ **Кнопка публикации**: для черновиков
- ✅ **Визуальная обратная связь**: цвета и анимации
- ✅ **Автообновление**: список обновляется автоматически

## Технические детали

### API Endpoint:
```typescript
publishJob: builder.mutation<Job, string>({
  query: (jobId) => ({
    url: `/jobs/${jobId}/publish`,
    method: 'POST',
  }),
  invalidatesTags: (result, error, jobId) => [
    { type: 'Job', id: jobId },
    'Job',
    'MyJobs',
  ],
})
```

### Обработчик публикации:
```typescript
const handlePublishJob = async (jobId: string) => {
  try {
    await publishJob(jobId).unwrap();
    refetch(); // Обновление списка
  } catch (error) {
    console.error('Failed to publish job:', error);
  }
};
```

### Условное отображение кнопки:
```jsx
{job.status === 'DRAFT' && (
  <button 
    onClick={() => handlePublishJob(job.id)}
    disabled={isPublishing}
    className={styles.publishButton}
  >
    {isPublishing ? 'Публикация...' : 'Опубликовать'}
  </button>
)}
```

## Адаптивность

### Десктоп:
- Статусы в колонке справа
- Полноразмерная кнопка публикации
- Hover-эффекты

### Мобильные устройства:
- Статусы в строку
- Компактная кнопка
- Уменьшенные размеры

## Совместимость

- ✅ Все современные браузеры
- ✅ Мобильные устройства и планшеты
- ✅ Сохранение существующего функционала
- ✅ Отсутствие ошибок линтера
- ✅ Работа с существующими вакансиями

## Дополнительные улучшения

### Визуальная обратная связь:
- Анимация загрузки при публикации
- Hover-эффекты для кнопок
- Цветовая индикация статусов

### UX улучшения:
- Кнопка появляется только когда нужна
- Автоматическое обновление списка
- Понятные иконки и подписи
