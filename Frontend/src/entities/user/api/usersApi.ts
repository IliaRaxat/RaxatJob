import { createApi } from '@reduxjs/toolkit/query/react';import { baseQuery } from '@/shared/api/base';import { User } from '../model/types';export interface UsersResponse {  users: User[];  pagination: {    page: number;    limit: number;    total: number;    totalPages: number;  };}export interface UsersParams {  role?: 'CANDIDATE' | 'HR' | 'UNIVERSITY' | 'ADMIN';  isActive?: boolean;  page?: number;  limit?: number;  search?: string;}export const usersApi = createApi({  reducerPath: 'usersApi',  baseQuery,  tagTypes: ['Users'],  endpoints: (builder) => ({    getUsers: builder.query<UsersResponse, UsersParams>({      query: (params) => {        const searchParams = new URLSearchParams();        if (params.role) searchParams.append('role', params.role);        if (params.isActive !== undefined) searchParams.append('isActive', params.isActive.toString());        if (params.page) searchParams.append('page', params.page.toString());        if (params.limit) searchParams.append('limit', params.limit.toString());        if (params.search) searchParams.append('search', params.search);        const queryString = searchParams.toString();        return `/admin/users${queryString ? `?${queryString}` : ''}`;      },      providesTags: ['Users'],    }),    getUsersStats: builder.query<{      totalUsers: number;      usersByRole: Array<{        role: string;        _count: number;      }>;      activeUsers: number;      newUsers: number;    }, void>({      query: () => '/admin/analytics/users',      providesTags: ['Users'],    }),    toggleUserStatus: builder.mutation<User, { userId: string; isActive: boolean }>({      query: ({ userId, isActive }) => ({        url: `/admin/users/${userId}/status`,        method: 'PATCH',        body: { isActive },      }),      invalidatesTags: ['Users'],    }),    deleteUser: builder.mutation<void, string>({      query: (userId) => ({        url: `/admin/users/${userId}`,        method: 'DELETE',      }),      invalidatesTags: ['Users'],    }),    bulkToggleStatus: builder.mutation<void, { userIds: string[]; isActive: boolean }>({      query: ({ userIds, isActive }) => ({        url: '/admin/users/bulk/status',        method: 'PATCH',        body: { userIds, isActive },      }),      invalidatesTags: ['Users'],    }),    bulkDeleteUsers: builder.mutation<void, string[]>({      query: (userIds) => ({        url: '/admin/users/bulk/delete',        method: 'DELETE',        body: { userIds },      }),      invalidatesTags: ['Users'],    }),  }),});export const {  useGetUsersQuery,  useGetUsersStatsQuery,  useToggleUserStatusMutation,  useDeleteUserMutation,  useBulkToggleStatusMutation,  useBulkDeleteUsersMutation,} = usersApi;
